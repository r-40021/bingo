(()=>{"use strict";const e=void 0!==window.ontouchstart&&0<navigator.maxTouchPoints;function t(e){e.classList.add("active"),e.removeAttribute("aria-hidden"),document.getElementById("modal-overlay").classList.add("active"),document.getElementById("modal-overlay").style.zIndex=9998}function n(e){e.classList.remove("active"),e.setAttribute("aria-hidden",!0),document.getElementById("modal-overlay").classList.remove("active"),setTimeout((()=>{document.getElementById("modal-overlay").style.zIndex=-2}),150)}var o=75,l=[],a=[],d=["#ffa500","#d3e15c","#b384c7","#F06060","#a9ceec"],i=new Object;let m,s;i.max=[],i.number=[],i.color=[],function(){let n=document.getElementsByClassName("modal-trigger");for(let o=0;o<n.length;o++){const l=n[o];if(e){let e=!1;l.addEventListener("touchstart",(n=>{e=!1,l.addEventListener("touchend",(n=>{e||t(document.getElementById(l.getAttribute("modal-target")))}))}),!1),l.addEventListener("touchmove",(t=>{document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY)!==l&&(e=!0)}),!1)}else l.addEventListener("click",(e=>{t(document.getElementById(l.getAttribute("modal-target")))}),!1)}}(),function(){let t=document.getElementsByClassName("modalClose");for(let o=0;o<t.length;o++){const l=t[o];if(e){let e=!1;l.addEventListener("touchstart",(t=>{e=!1,l.addEventListener("touchend",(t=>{e||(!l.classList.contains("modal-overlay")||l.classList.contains("modal-overlay")&&l.classList.contains("active")&&!t.target.closest(".modal"))&&n(document.querySelector(".modal.active"))}))}),!1),l.addEventListener("touchmove",(t=>{document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY)!==l&&(e=!0)}),!1)}else l.addEventListener("click",(e=>{(!l.classList.contains("modal-overlay")||l.classList.contains("modal-overlay")&&l.classList.contains("active")&&!e.target.closest(".modal"))&&n(document.querySelector(".modal.active"))}),!1)}document.addEventListener("keydown",(e=>{!e.repeat&&"Escape"===e.key&&document.querySelector(".modal.active")&&n(document.querySelector(".modal.active"))}))}();const r=window.matchMedia("(prefers-color-scheme: dark)");function c(){var e=document.getElementById("bingoNumber"),t=document.getElementById("number-wrap"),n=document.getElementById("history-body");t.clientHeight>=t.clientWidth?(e.style.width="90%",e.style.height=e.offsetWidth+"px"):(e.style.height="90%",e.style.width=e.offsetHeight+"px"),e.style.fontSize=e.offsetHeight/5*3+"px",e.style.borderWidth=.1*e.offsetHeight+"px",window.innerWidth<576?n.style.fontSize=.12*n.clientWidth/3*2+"px":n.style.fontSize=.09*n.clientWidth/3*2+"px"}function u(){a=[],localStorage.setItem("max",o);for(let e=0;e<o;e++)-1===l.indexOf(e+1)&&-1===a.indexOf(e+1)&&a.push(e+1)}function g(e){document.getElementById(e).setAttribute("disabled",null)}function y(){g("spin"),g("reset"),g("bingoMax"),g("bingoMaxText")}function h(e){document.getElementById(e).removeAttribute("disabled")}function v(){h("spin"),h("reset"),h("bingoMax"),h("bingoMaxText"),document.getElementById("spin").focus(),B()}function b(){var e=window.innerHeight;document.getElementsByClassName("fixed")[0].style.height=e+"px",document.body.style.height=e+"px"}function I(){document.getElementById("historyLength").textContent=l.length}document.addEventListener("DOMContentLoaded",(function(){const e=window.navigator.userAgent.toLowerCase();if(-1!==e.indexOf("android")||-1!==e.indexOf("linux")&&"ontouchstart"in document){var t=document.getElementsByClassName("shareiOS"),n=document.getElementsByClassName("shareAndroid");for(let e=0;e<t.length;e++)t[e].style.display="none",n[e].style.display="inline"}if(b(),c(),document.getElementById("bingoNumber").style.opacity=1,"dark"===localStorage.getItem("theme")?E("d"):"light"===localStorage.getItem("theme")?E("l"):"auto"===localStorage.getItem("theme")?E("a"):E(r),localStorage.getItem("myHistory")&&JSON.parse(localStorage.getItem("myHistory")).length>=1){var a=localStorage.getItem("myHistory");l=JSON.parse(a);var m=document.getElementById("history-body");for(let e=0;e<l.length;e++){var s=document.createElement("div");s.className="history-number",s.textContent=l[e],m.appendChild(s)}document.getElementById("number-inner").textContent=l[l.length-1],i.number.unshift(Number(l[l.length-1])),m.scroll(0,m.scrollHeight-m.clientHeight)}localStorage.getItem("max")&&(o=Number(localStorage.getItem("max")),document.getElementById("bingoMax").value=o,document.getElementById("bingoMaxText").value=o,i.max.unshift(Number(o))),localStorage.getItem("lastColor")&&(document.getElementById("bingoNumber").style.borderColor=d[Number(localStorage.getItem("lastColor"))],i.color.unshift(Number(localStorage.getItem("lastColor")))),u(),I(),v()})),window.addEventListener("resize",(function(){b(),c()})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("bingoMax"),t=document.getElementById("bingoMaxText");e.addEventListener("input",(function(){t.value=e.value,o=Number(e.value),i.max[0]=o,u()})),t.addEventListener("input",(function(){e.value=t.value,o=Number(e.value),i.max[0]=o,u()})),t.addEventListener("change",(function(){t.value<1&&(t.value=1),t.value>99&&(t.value=99),e.value=t.value,o=Number(e.value),i.max[0]=o,u()}))}));const E=e=>{clearInterval(m),document.body.classList.add("anime");let t=document.getElementById("auto"),n=document.getElementById("light"),o=document.getElementById("dark");function l(e){let t=document.getElementsByClassName("lightIcon"),n=document.getElementsByClassName("darkIcon");if("dark"===e)for(let e=0;e<t.length;e++)t[e].style.display="none",n[e].style.display="inline";else for(let e=0;e<n.length;e++)n[e].style.display="none",t[e].style.display="inline";!function(e){let t;t="dark"===e?"#333":"#f8f9fa";let n=document.head.children;for(let e=0;e<n.length;e++)if("theme-color"===n[e].getAttribute("name")){n[e].setAttribute("content",t);break}}(e)}s?"d"===e?(document.body.classList.add("dark"),l("dark"),f(),o.classList.add("active"),localStorage.setItem("theme","dark")):"l"===e?(document.body.classList.remove("dark"),l("light"),f(),n.classList.add("active"),localStorage.setItem("theme","light")):"a"===e&&(r.matches?(document.body.classList.add("dark"),l("dark"),localStorage.setItem("theme","auto")):(document.body.classList.remove("dark"),l("light"),localStorage.setItem("theme","auto")),f(),t.classList.add("active")):!r.matches&&"d"!==e||"l"===e?(document.body.classList.remove("dark"),l("light"),"l"===e?(f(),n.classList.add("active"),localStorage.setItem("theme","light")):localStorage.setItem("theme","auto")):(document.body.classList.add("dark"),l("dark"),"d"===e?(f(),o.classList.add("active"),localStorage.setItem("theme","dark")):localStorage.setItem("theme","auto")),"d"===e||"l"===e?s=1:"a"===e&&(s=0),m=setInterval((()=>{document.body.classList.remove("anime")}),1e3)};function f(){document.querySelectorAll("#theme .list-group-item").forEach((function(e){e.classList.remove("active")}))}window.glSpin=()=>{if(a.length<=0){let e=["聖戦の記録をパラダイムシフトしてやり直しますか？","履歴を電脳空間から存在を抹消してやり直しますか？","履歴をリセットしてやり直しますか？…うっ……頭が……ッ","履歴をリセットして野村哲也を筆頭とするメンバーでリメイク、希望を私たちの光に変えますか…それとも感情に任せて俺を殺しますか？","履歴をリセットしてやり直します――表向きは、ねかとか…な？"];document.getElementById("end-body").textContent=e[Date.now()%e.length],t(document.getElementById("end-modal"))}else{y();var e=document.getElementById("undo");e.style.visibility="hidden",document.getElementById("startOver").style.visibility="hidden";var n=0,m=document.getElementById("bingoNumber");if(1===a.length)var s=5;else s=Math.floor(7*Math.random()+5);var r=document.getElementById("history-body"),c=setInterval((()=>{var t=Math.floor(Math.random()*a.length),u=a[t];document.getElementById("number-inner").textContent=u;var g=n%d.length;if(m.style.borderColor=d[g],++n>=s){clearInterval(c);var y=document.createElement("div");y.className="history-number",y.textContent=u,l.push(u),localStorage.setItem("myHistory",JSON.stringify(l)),localStorage.setItem("lastColor",g),a.splice(a.indexOf(u),1),r.appendChild(y),i.max.unshift(Number(o)),i.number.unshift(Number(u)),i.color.unshift(Number(g)),i.number.length>=2&&i.max.length>=2&&i.color.length>=2&&(e.style.visibility="visible"),r.scroll(0,r.scrollHeight-r.clientHeight),I(),v()}}),300)}},window.glResetAsk=()=>{t(document.getElementById("reset-modal"))},window.glReset=()=>{document.getElementById("undo").style.visibility="hidden",document.getElementById("startOver").style.visibility="hidden",y(),localStorage.removeItem("myHistory"),localStorage.removeItem("lastColor"),document.getElementById("number-inner").textContent=null,document.getElementById("history-body").textContent=null,document.getElementById("bingoNumber").style.borderColor=d[0],l=[],a=[],(i=new Object).max=[],i.number=[],i.color=[],u(),I(),v()},window.glCopy=()=>{var e=location.href;navigator.clipboard.writeText(e)},window.glUndo=()=>{var e=document.getElementsByClassName("history-number"),t=e[e.length-1];t.remove(),l.splice(l.indexOf(t.textContent),1),document.getElementById("number-inner").textContent=i.number[1],document.getElementById("bingoNumber").style.borderColor=d[i.color[1]],o=i.max[1],document.getElementById("bingoMax").value=o,document.getElementById("bingoMaxText").value=o,u(),localStorage.setItem("myHistory",JSON.stringify(l)),localStorage.setItem("max",i.max[1]),localStorage.setItem("lastColor",i.color[1]),document.getElementById("undo").style.visibility="hidden",document.getElementById("startOver").style.visibility="visible",I(),document.getElementById("spin").focus(),B()},window.glRedo=()=>{var e=document.getElementById("history-body"),t=document.createElement("div"),n=i.number[0];t.className="history-number",t.textContent=n,e.appendChild(t),document.getElementById("number-inner").textContent=n,document.getElementById("bingoNumber").style.borderColor=d[i.color[0]],o=i.max[0],document.getElementById("bingoMax").value=o,document.getElementById("bingoMaxText").value=o,l.push(n),u(),localStorage.setItem("myHistory",JSON.stringify(l)),localStorage.setItem("max",i.max[0]),localStorage.setItem("lastColor",i.color[0]),document.getElementById("undo").style.visibility="visible",document.getElementById("startOver").style.visibility="hidden",I(),document.getElementById("spin").focus(),B()},window.glTheme=E;try{r.addEventListener("change",E)}catch(e){try{r.addListener(E)}catch(e){console.error(e)}}let x;function B(){clearTimeout(x),x=setTimeout((()=>{document.getElementById("spin").blur()}),12e4)}!function(){const e=document.getElementById("shareAPI");navigator.share||e.remove(),e.addEventListener("click",(async()=>{const e={title:"やまだBINGO",text:"履歴や設定を自動で保存する機能を搭載した、インストール不要のビンゴマシーン",url:location.href};try{await navigator.share(e)}catch(e){console.error("Web Share API:"+e)}}))}()})();